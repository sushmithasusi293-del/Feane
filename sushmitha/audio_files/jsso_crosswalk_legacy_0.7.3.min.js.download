'use strict';var _slicedToArray=function(){function a(b,d){var f=[],g=!0,h=!1,j=void 0;try{for(var l,k=b[Symbol.iterator]();!(g=(l=k.next()).done)&&(f.push(l.value),!(d&&f.length===d));g=!0);}catch(m){h=!0,j=m}finally{try{!g&&k['return']&&k['return']()}finally{if(h)throw j}}return f}return function(b,d){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,d);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function a(b,d){for(var g,f=0;f<d.length;f++)g=d[f],g.enumerable=g.enumerable||!1,g.configurable=!0,'value'in g&&(g.writable=!0),Object.defineProperty(b,g.key,g)}return function(b,d,f){return d&&a(b.prototype,d),f&&a(b,f),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var JssoCrosswalk=function(){function a(b,d,f,g){_classCallCheck(this,a),this.channel=b,this.platform=d,this.ssoBaseUrl=f&&this.isValidDomain(f)?f+'/sso/crossapp/identity/web/':'https://jsso.indiatimes.com/sso/crossapp/identity/web/',this.socialappBaseUrl=g&&this.isValidDomain(g)?g+'/socialsite/crossapp/web/':'https://socialappsintegrator.indiatimes.com/socialsite/crossapp/web/',this.sdkVersion='0.7.3',this.csrfToken=this.getCookie('csrfToken'),this.captchaToken=this.getCookie('captchaToken'),this.ssec=this.getCookie('jsso_crosswalk_ssec_'+this.channel),this.tksec=this.getCookie('jsso_crosswalk_tksec_'+this.channel),this.csut=this.getCookie('csut'),this.gdpr=this.getCookie('gdpr'),this.UNAUTHORIZED_ACCESS_RESPONSE={code:404,message:'UNAUTHORIZED_ACCESS',status:'FAILURE',data:null},this.CONNECTION_ERROR_RESPONSE={code:503,message:'CONNECTION_ERROR',status:'FAILURE',data:null},this.CONNECTION_TIMEOUT_RESPONSE={code:504,message:'CONNECTION_TIMEOUT',status:'FAILURE',data:null},this.APP_CONNECTION_TIMEOUT_RESPONSE={code:505,message:'TRUECALLER_LOGIN_FAILURE',status:'FAILURE',data:null},this.INVALID_MOBILE={code:402,message:'INVALID_MOBILE',status:'FAILURE',data:null},this.INVALID_EMAIL={code:403,message:'INVALID_EMAIL',status:'FAILURE',data:null},this.INVALID_REQUEST={code:413,message:'INVALID_REQUEST',status:'FAILURE',data:null},this.INVALID_PASSWORD={code:417,message:'INVALID_PASSWORD',status:'FAILURE',data:null},this.INVALID_DOMAIN={code:418,message:'INVALID_DOMAIN',status:'FAILURE',data:null};var h=this.getChannelCookies();''!=h.login&&''==h.daily&&this.getValidLoggedInUser();var j=window.location.href;if(getParameterByName('code',j)){var k=getParameterByName('state',j).split(',');'SSOTLOGINGOOGLEPLUS'==k[0]&&this.googleplusLogin(getParameterByName('code',j),k[1],function(l){200==l.code&&(window.opener&&window.opener.JssoLoginCompleteCallback?window.opener.JssoLoginCompleteCallback(l):window.parent&&window.parent.JssoLoginCompleteCallback&&window.parent.JssoLoginCompleteCallback(l),window.close())}),'SSOTLOGINFACEBOOK'==k[0]&&this.facebookLogin(getParameterByName('code',j),k[1],function(l){(200==l.code||4413==l.code&&l.stateid)&&(window.opener&&window.opener.JssoLoginCompleteCallback?window.opener.JssoLoginCompleteCallback(l):window.parent&&window.parent.JssoLoginCompleteCallback&&window.parent.JssoLoginCompleteCallback(l),window.close())}),'SSOTLOGINLINKEDIN'==getParameterByName('state',j)[0]&&this.linkedinLogin(getParameterByName('code',j),window.location.href.split('?')[0],function(l){200==l.code&&(window.opener&&window.opener.JssoLoginCompleteCallback?window.opener.JssoLoginCompleteCallback(l):window.parent&&window.parent.JssoLoginCompleteCallback&&window.parent.JssoLoginCompleteCallback(l),window.close())})}}return _createClass(a,[{key:'asyncJssoCall',value:function asyncJssoCall(b,d,f){this.asyncCall(this.ssoBaseUrl+b,d,f)}},{key:'asyncJssoCallWithHeaders',value:function asyncJssoCallWithHeaders(b,d,f,g){this.asyncCallWithHeaders(this.ssoBaseUrl+b,d,f,g)}},{key:'asyncSocialappCall',value:function asyncSocialappCall(b,d,f){this.asyncCall(this.socialappBaseUrl+b,d,f)}},{key:'asyncCall',value:function asyncCall(b,d,f){var g=new XMLHttpRequest;g.open('POST',b),g.timeout=3e4,g.withCredentials=!0,g.setRequestHeader('content-type','application/json'),g.setRequestHeader('channel',this.channel),g.setRequestHeader('platform',this.platform),g.setRequestHeader('sdkVersion',this.sdkVersion),g.setRequestHeader('IsJssoCrosswalk','true'),g.setRequestHeader('csrfToken',this.getCookie('csrfToken')),g.setRequestHeader('captchaToken',this.getCookie('captchaToken')),g.setRequestHeader('ssec',this.getCookie('jsso_crosswalk_ssec_'+this.channel)),g.setRequestHeader('tksec',this.getCookie('jsso_crosswalk_tksec_'+this.channel)),g.setRequestHeader('csut',this.getCookie('csut')),g.setRequestHeader('gdpr',this.getCookie('gdpr')),g.responseType='json',g.onload=function(){var h=g.response;return('string'==typeof h&&(h=JSON.parse(h)),!h||!h.code)?(this.deleteChannelCookies(),void(f&&f(this.UNAUTHORIZED_ACCESS_RESPONSE))):404==h.code?(this.deleteChannelCookies(),void(f&&f(h))):(g.getResponseHeader('csrfToken')&&(this.csrfToken=g.getResponseHeader('csrfToken')),g.getResponseHeader('captchaToken')&&(this.captchaToken=g.getResponseHeader('captchaToken')),g.getResponseHeader('ssec')&&(this.ssec=g.getResponseHeader('ssec')),g.getResponseHeader('tksec')&&(this.tksec=g.getResponseHeader('tksec')),g.getResponseHeader('csut')&&(this.csut=g.getResponseHeader('csut')),g.getResponseHeader('gdpr')&&(this.gdpr=g.getResponseHeader('gdpr')),f)?f(h):void 0}.bind(this),g.onerror=function(){if(f)return f(this.CONNECTION_ERROR_RESPONSE)}.bind(this),g.ontimeout=function(){if(f)return f(this.CONNECTION_TIMEOUT_RESPONSE)}.bind(this),g.send(JSON.stringify(d))}},{key:'asyncCallWithHeaders',value:function asyncCallWithHeaders(b,d,f,g){var h=new XMLHttpRequest;if(h.open('POST',b),h.timeout=3e4,h.withCredentials=!0,h.setRequestHeader('content-type','application/json'),h.setRequestHeader('channel',this.channel),h.setRequestHeader('platform',this.platform),h.setRequestHeader('sdkVersion',this.sdkVersion),h.setRequestHeader('IsJssoCrosswalk','true'),h.setRequestHeader('csrfToken',this.getCookie('csrfToken')),h.setRequestHeader('captchaToken',this.getCookie('captchaToken')),h.setRequestHeader('ssec',this.getCookie('jsso_crosswalk_ssec_'+this.channel)),h.setRequestHeader('tksec',this.getCookie('jsso_crosswalk_tksec_'+this.channel)),h.setRequestHeader('csut',this.getCookie('csut')),h.setRequestHeader('gdpr',this.getCookie('this.gdpr')),h.responseType='json',f){var j=Object.entries(f),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var n,m=j[Symbol.iterator]();!(_iteratorNormalCompletion=(n=m.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(n.value,2),k=_step$value[0],l=_step$value[1];h.setRequestHeader(k,l)}}catch(o){_didIteratorError=!0,_iteratorError=o}finally{try{!_iteratorNormalCompletion&&m.return&&m.return()}finally{if(_didIteratorError)throw _iteratorError}}}h.onload=function(){var o=h.response;return('string'==typeof o&&(o=JSON.parse(o)),!o||!o.code)?(this.deleteChannelCookies(),void(g&&g(this.UNAUTHORIZED_ACCESS_RESPONSE))):404==o.code?(this.deleteChannelCookies(),void(g&&g(o))):(h.getResponseHeader('csrfToken')&&(this.csrfToken=h.getResponseHeader('csrfToken')),h.getResponseHeader('captchaToken')&&(this.captchaToken=h.getResponseHeader('captchaToken')),h.getResponseHeader('ssec')&&(this.ssec=h.getResponseHeader('ssec')),h.getResponseHeader('tksec')&&(this.tksec=h.getResponseHeader('tksec')),h.getResponseHeader('csut')&&(this.csut=h.getResponseHeader('csut')),h.getResponseHeader('gdpr')&&(this.gdpr=h.getResponseHeader('gdpr')),g)?g(o):void 0}.bind(this),h.onerror=function(){if(g)return g(this.CONNECTION_ERROR_RESPONSE)}.bind(this),h.ontimeout=function(){if(g)return g(this.CONNECTION_TIMEOUT_RESPONSE)}.bind(this),h.send(JSON.stringify(d))}},{key:'fedcmLogin',value:function fedcmLogin(){var f=this;if(''==this.getCookie('jsso_crosswalk_tksec_'+this.channel)&&'IdentityCredential'in window){var d=Math.random().toString().substring(7);navigator.credentials.get({identity:{providers:[{configURL:this.ssoBaseUrl.split('/sso')[0]+'/fedcm.json',clientId:'TIMES',nonce:d}]}}).then(function(g){var h=g.token;null!=h&&f.getV1ValidLoggedInUser(h)}).catch(function(g){console.log(g)})}}},{key:'getValidLoggedInUser',value:function getValidLoggedInUser(b){this.asyncJssoCall('loggedInUser',{},function(d){if(200==d.code?this.createChannelCookies():this.fedcmLogin(),b)return b(d)}.bind(this))}},{key:'getV1ValidLoggedInUser',value:function getV1ValidLoggedInUser(b,d){this.asyncJssoCallWithHeaders('v1LoggedInUser',{},{ticketId:b},function(f){if(200==f.code&&(this.createChannelCookies(),location.reload()),d)return d(f)}.bind(this))}},{key:'getValidAppLoggedInUser',value:function getValidAppLoggedInUser(b,d,f,g,h){this.asyncJssoCallWithHeaders('appLoggedInUser',{},{ssoid:b,ssec:d,ticketId:f,tksec:g},function(j){if(200==j.code&&this.createChannelCookies(),h)return h(j)}.bind(this))}},{key:'checkUserExists',value:function checkUserExists(b,d){this.asyncJssoCall('checkUserExists',{identifier:b},d)}},{key:'registerUser',value:function registerUser(b,d,f,g,h,j,k,l,m,n,o,p,q){return h||j?h&&!this.isValidEmail(h)?p(this.INVALID_EMAIL):j&&!this.isValidMobile(j)?p(this.INVALID_MOBILE):this.isValidPassword(k)?void(q?this.asyncJssoCall('registerUser',{firstName:b,lastName:d,gender:f,dob:g,email:h,mobile:j,password:k,isSendOffer:l,termsAccepted:m,shareDataAllowed:n,timespointsPolicy:o,userRecaptchaResponseToken:q},function(r){if(200==r.code&&this.createChannelCookies(),p)return p(r)}.bind(this)):this.asyncJssoCall('registerUser',{firstName:b,lastName:d,gender:f,dob:g,email:h,mobile:j,password:k,isSendOffer:l,termsAccepted:m,shareDataAllowed:n,timespointsPolicy:o},p)):p(this.INVALID_PASSWORD):p(this.INVALID_REQUEST)}},{key:'registerUserRecaptcha',value:function registerUserRecaptcha(b,d,f,g,h,j,k,l,m,n,o,p,q){return h||j?h&&!this.isValidEmail(h)?q(this.INVALID_EMAIL):j&&!this.isValidMobile(j)?q(this.INVALID_MOBILE):this.isValidPassword(k)?void this.asyncJssoCall('registerUserRecaptcha',{firstName:b,lastName:d,gender:f,dob:g,email:h,mobile:j,password:k,isSendOffer:l,recaptcha:m,termsAccepted:n,shareDataAllowed:o,timespointsPolicy:p},function(r){if(200==r.code&&this.createChannelCookies(),q)return q(r)}.bind(this)):q(this.INVALID_PASSWORD):q(this.INVALID_REQUEST)}},{key:'resendMobileSignUpOtp',value:function resendMobileSignUpOtp(b,d,f,g){return this.isValidMobile(b)?void(g?this.asyncJssoCall('resendSignUpOtp',{mobile:b,ssoid:d,userRecaptchaResponseToken:g},f):this.asyncJssoCall('resendSignUpOtp',{mobile:b,ssoid:d},f)):f(this.INVALID_MOBILE)}},{key:'resendEmailSignUpOtp',value:function resendEmailSignUpOtp(b,d,f,g){return this.isValidEmail(b)?void(g?this.asyncJssoCall('resendSignUpOtp',{email:b,ssoid:d,userRecaptchaResponseToken:g},function(h){if(200==h.code&&this.createChannelCookies(),f)return f(h)}.bind(this)):this.asyncJssoCall('resendSignUpOtp',{email:b,ssoid:d},f)):f(this.INVALID_EMAIL)}},{key:'verifyMobileSignUp',value:function verifyMobileSignUp(b,d,f,g){return this.isValidMobile(b)?void this.asyncJssoCall('verifySignUpOTP',{mobile:b,ssoid:d,otp:f},function(h){if(200==h.code&&this.createChannelCookies(),g)return g(h)}.bind(this)):g(this.INVALID_MOBILE)}},{key:'verifyEmailSignUp',value:function verifyEmailSignUp(b,d,f,g){return this.isValidEmail(b)?void this.asyncJssoCall('verifySignUpOTP',{email:b,ssoid:d,otp:f},function(h){if(200==h.code&&this.createChannelCookies(),g)return g(h)}.bind(this)):g(this.INVALID_EMAIL)}},{key:'verifyMobileLogin',value:function verifyMobileLogin(b,d,f){return this.isValidMobile(b)?void this.asyncJssoCall('verifyLoginOtpPassword',{mobile:b,password:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_MOBILE)}},{key:'verifyEmailLogin',value:function verifyEmailLogin(b,d,f){return this.isValidEmail(b)?void this.asyncJssoCall('verifyLoginOtpPassword',{email:b,password:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_EMAIL)}},{key:'v1VerifyMobileLogin',value:function v1VerifyMobileLogin(b,d,f){return this.isValidMobile(b)?void this.asyncJssoCall('v1VerifyLoginOtp',{mobile:b,password:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_MOBILE)}},{key:'v1VerifyEmailLogin',value:function v1VerifyEmailLogin(b,d,f){return this.isValidEmail(b)?void this.asyncJssoCall('v1VerifyLoginOtp',{email:b,password:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_EMAIL)}},{key:'verifyMobileLoginForOptIn',value:function verifyMobileLoginForOptIn(b,d,f){return this.isValidMobile(b)?void this.asyncJssoCall('verifyLoginOtpPassword',{mobile:b,password:d,optInRequest:!0},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_MOBILE)}},{key:'verifyEmailLoginForOptIn',value:function verifyEmailLoginForOptIn(b,d,f){return this.isValidEmail(b)?void this.asyncJssoCall('verifyLoginOtpPassword',{email:b,password:d,optInRequest:!0},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this)):f(this.INVALID_EMAIL)}},{key:'optIn',value:function optIn(b){this.asyncJssoCall('optIn',{},function(d){if(b)return b(d)}.bind(this))}},{key:'facebookLogin',value:function facebookLogin(b,d,f){this.asyncSocialappCall('facebookLogin',{code:b,facebookRedirectUri:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this))}},{key:'appleLogin',value:function appleLogin(b,d){this.asyncSocialappCall('appleLogin',{code:b},function(f){if(200==f.code&&this.createChannelCookies(),d)return d(f)}.bind(this))}},{key:'googleplusLogin',value:function googleplusLogin(b,d,f){this.asyncSocialappCall('googleplusLogin',{code:b,googleplusRedirectUri:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this))}},{key:'linkedinLogin',value:function linkedinLogin(b,d,f){this.asyncSocialappCall('linkedinLogin',{code:b,linkedinRedirectUri:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this))}},{key:'getUserProfile',value:function getUserProfile(b){this.asyncJssoCall('getUserProfile',{},b)}},{key:'getUserDetails',value:function getUserDetails(b){this.asyncJssoCall('getUserDetails',{},b)}},{key:'sendUpdateOtp',value:function sendUpdateOtp(b,d){d?this.asyncJssoCall('sendUpdateOtp',{},function(f){if(200==f.code&&this.createChannelCookies(),b)return b(f)}.bind(this)):this.asyncJssoCall('sendUpdateOtp',{},b)}},{key:'getMobileLoginOtp',value:function getMobileLoginOtp(b,d,f){return this.isValidMobile(b)?void(void 0==f?this.asyncJssoCall('getLoginOtp',{mobile:b},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('getLoginOtp',{mobile:b,userRecaptchaResponseToken:f},d)):d(this.INVALID_MOBILE)}},{key:'getMobileLoginOtpForOptIn',value:function getMobileLoginOtpForOptIn(b,d,f){return this.isValidMobile(b)?void(void 0==f?this.asyncJssoCall('getLoginOtp',{mobile:b},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('getLoginOtp',{mobile:b,optInRequest:!0,userRecaptchaResponseToken:f},d)):d(this.INVALID_MOBILE)}},{key:'getEmailLoginOtp',value:function getEmailLoginOtp(b,d,f){return this.isValidEmail(b)?void(void 0==f?this.asyncJssoCall('getLoginOtp',{email:b},d):this.asyncJssoCall('getLoginOtp',{email:b,userRecaptchaResponseToken:f},d)):d(this.INVALID_EMAIL)}},{key:'getEmailLoginOtpForOptIn',value:function getEmailLoginOtpForOptIn(b,d,f){return this.isValidEmail(b)?void(void 0==f?this.asyncJssoCall('getLoginOtp',{email:b},d):this.asyncJssoCall('getLoginOtp',{email:b,optInRequest:!0,userRecaptchaResponseToken:f},d)):d(this.INVALID_EMAIL)}},{key:'updateUserProfile',value:function updateUserProfile(b,d,f,g,h,j,k,l){this.asyncJssoCall('updateUserProfile',{firstName:b,lastName:d,gender:f,dob:g,city:h,termsAccepted:j,shareDataAllowed:k},function(m){if(200==m.code&&this.createChannelCookies(),l)return l(m)}.bind(this))}},{key:'getMobileForgotPasswordOtp',value:function getMobileForgotPasswordOtp(b,d,f){return this.isValidMobile(b)?void(f?this.asyncJssoCall('getForgotPasswordOtp',{mobile:b,userRecaptchaResponseToken:f},d):this.asyncJssoCall('getForgotPasswordOtp',{mobile:b},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this))):d(this.INVALID_MOBILE)}},{key:'getEmailForgotPasswordOtp',value:function getEmailForgotPasswordOtp(b,d,f){return this.isValidEmail(b)?void(f?this.asyncJssoCall('getForgotPasswordOtp',{email:b,userRecaptchaResponseToken:f},d):this.asyncJssoCall('getForgotPasswordOtp',{email:b},d)):d(this.INVALID_EMAIL)}},{key:'verifyMobileForgotPassword',value:function verifyMobileForgotPassword(b,d,f,g,h){return this.isValidMobile(b)?this.isValidPassword(f)?void this.asyncJssoCall('verifyForgotPassword',{mobile:b,otp:d,password:f,confirmPassword:g},h):h(this.INVALID_PASSWORD):h(this.INVALID_MOBILE)}},{key:'verifyEmailForgotPassword',value:function verifyEmailForgotPassword(b,d,f,g,h){return this.isValidEmail(b)?this.isValidPassword(f)?void this.asyncJssoCall('verifyForgotPassword',{email:b,otp:d,password:f,confirmPassword:g},h):h(this.INVALID_PASSWORD):h(this.INVALID_EMAIL)}},{key:'loginMobileForgotPassword',value:function loginMobileForgotPassword(b,d,f,g,h){return this.isValidMobile(b)?this.isValidPassword(f)?void this.asyncJssoCall('loginForgotPassword',{mobile:b,otp:d,password:f,confirmPassword:g},function(j){if(200==j.code&&this.createChannelCookies(),h)return h(j)}.bind(this)):h(this.INVALID_PASSWORD):h(this.INVALID_MOBILE)}},{key:'loginEmailForgotPassword',value:function loginEmailForgotPassword(b,d,f,g,h){return this.isValidEmail(b)?this.isValidPassword(f)?void this.asyncJssoCall('loginForgotPassword',{email:b,otp:d,password:f,confirmPassword:g},function(j){if(200==j.code&&this.createChannelCookies(),h)return h(j)}.bind(this)):h(this.INVALID_PASSWORD):h(this.INVALID_EMAIL)}},{key:'signOutUser',value:function signOutUser(b){this.asyncJssoCall('signOutUser',{},function(d){if(this.deleteChannelCookies(),b)return b(d)}.bind(this))}},{key:'updateMobile',value:function updateMobile(b,d,f){return this.isValidMobile(b)?void(f?this.asyncJssoCall('updateMobile',{mobile:b,userRecaptchaResponseToken:f},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('updateMobile',{mobile:b},d)):d(this.INVALID_MOBILE)}},{key:'v1UpdateMobile',value:function v1UpdateMobile(b,d,f){return this.isValidMobile(b)?void(f?this.asyncJssoCall('v1UpdateMobile',{mobile:b,userRecaptchaResponseToken:f},d):this.asyncJssoCall('updateMobile',{mobile:b},asyncJssoCallWithHeaders,d)):d(this.INVALID_MOBILE)}},{key:'verifyMobile',value:function verifyMobile(b,d,f){return this.isValidMobile(b)?void this.asyncJssoCall('verifyMobile',{mobile:b,otp:d},f):f(this.INVALID_MOBILE)}},{key:'addAlternateEmail',value:function addAlternateEmail(b,d){return this.isValidEmail(b)?void this.asyncJssoCall('addAlternateEmail',{email:b},d):d(this.INVALID_EMAIL)}},{key:'v1AddUpdateEmail',value:function v1AddUpdateEmail(b,d,f){return this.isValidEmail(b)?void(f?this.asyncJssoCall('v1AddUpdateEmail',{email:b,userRecaptchaResponseToken:f},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('v1AddUpdateEmail',{email:b},d)):d(this.INVALID_EMAIL)}},{key:'v1AddUpdateMobile',value:function v1AddUpdateMobile(b,d,f){return this.isValidMobile(b)?void(f?this.asyncJssoCall('v1AddUpdateMobile',{mobile:b,userRecaptchaResponseToken:f},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('v1AddUpdateMobile',{mobile:b},d)):d(this.INVALID_MOBILE)}},{key:'verifyAlternateEmail',value:function verifyAlternateEmail(b,d,f){return this.isValidEmail(b)?void this.asyncJssoCall('verifyAlternateEmail',{email:b,otp:d},f):f(this.INVALID_EMAIL)}},{key:'v1VerifyAlternateEmail',value:function v1VerifyAlternateEmail(b,d,f,g){return this.isValidEmail(b)?void this.asyncJssoCall('v1verifyAlternateEmail',{email:b,otp:d,uuid:f},g):g(this.INVALID_EMAIL)}},{key:'v1VerifyAlternateMobile',value:function v1VerifyAlternateMobile(b,d,f,g){return this.isValidMobile(b)?void this.asyncJssoCall('v1verifyAlternateMobile',{mobile:b,otp:d,uuid:f},g):g(this.INVALID_MOBILE)}},{key:'verifyUpdateOtp',value:function verifyUpdateOtp(b,d,f){this.asyncJssoCall('verifyUpdateOtp',{otp:b,uuid:d},f)}},{key:'linkFacebook',value:function linkFacebook(b,d,f){this.asyncJssoCall('linkSocial',{oauthSiteId:'facebook',oauthCode:b,redirectUri:d},f)}},{key:'linkGoogleplus',value:function linkGoogleplus(b,d,f){this.asyncJssoCall('linkSocial',{oauthSiteId:'googleplus',oauthCode:b,redirectUri:d},f)}},{key:'linkLinkedin',value:function linkLinkedin(b,d,f){this.asyncJssoCall('linkSocial',{oauthSiteId:'linkedin',oauthCode:b,redirectUri:d},f)}},{key:'delinkSocial',value:function delinkSocial(b,d){this.asyncJssoCall('delinkSocial',{oauthSiteId:b},d)}},{key:'setPassword',value:function setPassword(b,d,f){return this.isValidPassword(b)?void this.asyncJssoCall('setPassword',{newPassword:b,confirmPassword:d},f):f(this.INVALID_PASSWORD)}},{key:'changePassword',value:function changePassword(b,d,f,g){return this.isValidPassword(d)?void this.asyncJssoCall('changePassword',{oldPassword:b,newPassword:d,confirmPassword:f},g):g(this.INVALID_PASSWORD)}},{key:'changePrimaryEmail',value:function changePrimaryEmail(b,d){return this.isValidEmail(b)?void this.asyncJssoCall('changePrimaryEmail',{emailId:b},d):d(this.INVALID_EMAIL)}},{key:'facebookLoginAccessToken',value:function facebookLoginAccessToken(b,d,f){this.asyncSocialappCall('facebookLogin',{accessToken:b,facebookRedirectUri:d},function(g){if(200==g.code&&this.createChannelCookies(),f)return f(g)}.bind(this))}},{key:'linkFacebookAccessToken',value:function linkFacebookAccessToken(b,d,f){this.asyncJssoCall('linkSocial',{oauthSiteId:'facebook',accessToken:b,redirectUri:d},f)}},{key:'socialImageUpload',value:function socialImageUpload(b,d){this.asyncJssoCall('socialImageUpload',{oauthSiteId:b},d)}},{key:'updateProfilePic',value:function updateProfilePic(b,d){var f=this.ssoBaseUrl+'uploadProfilePic',g=new FormData;g.append('datafile',b);var h=new XMLHttpRequest;h.open('POST',f),h.timeout=3e4,h.withCredentials=!0,h.setRequestHeader('channel',this.channel),h.setRequestHeader('platform',this.platform),h.setRequestHeader('sdkVersion',this.sdkVersion),h.setRequestHeader('IsJssoCrosswalk','true'),h.setRequestHeader('csrfToken',this.getCookie('csrfToken')),h.setRequestHeader('captchaToken',this.getCookie('captchaToken')),h.setRequestHeader('ssec',this.getCookie('jsso_crosswalk_ssec_'+this.channel)),h.setRequestHeader('tksec',this.getCookie('jsso_crosswalk_tksec_'+this.channel)),h.responseType='json',h.onload=function(){var j=h.response;return('string'==typeof j&&(j=JSON.parse(j)),!j||!j.code)?(this.deleteChannelCookies(),void(d&&d(this.UNAUTHORIZED_ACCESS_RESPONSE))):404==j.code?(this.deleteChannelCookies(),void(d&&d(j))):(h.getResponseHeader('csrftoken')&&(this.csrfToken=h.getResponseHeader('csrftoken')),h.getResponseHeader('captchaToken')&&(this.csrfToken=h.getResponseHeader('captchaToken')),h.getResponseHeader('ssec')&&(this.ssec=h.getResponseHeader('ssec')),h.getResponseHeader('tksec')&&(this.tksec=h.getResponseHeader('tksec')),d)?d(j):void 0}.bind(this),h.onerror=function(){if(d)return d(this.CONNECTION_ERROR_RESPONSE)}.bind(this),h.ontimeout=function(){if(d)return d(this.CONNECTION_TIMEOUT_RESPONSE)}.bind(this),h.send(g)}},{key:'registerOnlyMobile',value:function registerOnlyMobile(b,d,f,g,h,j,k,l,m){return g?g&&!this.isValidMobile(g)?l(this.INVALID_MOBILE):void(m?this.asyncJssoCall('registerOnlyMobile',{firstName:b,lastName:d,gender:f,mobile:g,termsAccepted:h,shareDataAllowed:j,timespointsPolicy:k,userRecaptchaResponseToken:m},function(n){if(200==n.code&&this.createChannelCookies(),l)return l(n)}.bind(this)):this.asyncJssoCall('registerOnlyMobile',{firstName:b,lastName:d,gender:f,mobile:g,termsAccepted:h,shareDataAllowed:j,timespointsPolicy:k},l)):l(this.INVALID_REQUEST)}},{key:'truecallerLogin',value:function truecallerLogin(b,d){return b?b&&!this.isValidMobile(b)?d(this.INVALID_MOBILE):void this.asyncJssoCall('truecallerLogin',{mobile:b},d):d(this.INVALID_REQUEST)}},{key:'truecallerVerify',value:function truecallerVerify(b,d){return b?void this.asyncJssoCall('truecallerVerify',{requestId:b},function(f){if(200==f.code&&this.createChannelCookies(),d)return d(f)}.bind(this)):d(this.INVALID_REQUEST)}},{key:'addAlternateEmailTrap',value:function addAlternateEmailTrap(b,d,f,g){return this.isValidEmail(b)?void this.asyncJssoCall('addAlternateEmailIdTrap',{email:b,password:d,alterEmail:f},g):g(this.INVALID_EMAIL)}},{key:'verifyAlternateEmailTrap',value:function verifyAlternateEmailTrap(b,d,f,g,h){return this.isValidEmail(b)?void this.asyncJssoCall('verifyAlternateEmailIdTrap',{email:b,password:d,alterEmail:f,otp:g},h):h(this.INVALID_EMAIL)}},{key:'addAlternateMobileTrap',value:function addAlternateMobileTrap(b,d,f,g){return this.isValidEmail(b)?void this.asyncJssoCall('addAlternateEmailIdTrap',{email:b,password:d,alterMobile:f},g):g(this.INVALID_EMAIL)}},{key:'verifyAlternateMobileTrap',value:function verifyAlternateMobileTrap(b,d,f,g,h){return this.isValidEmail(b)?void this.asyncJssoCall('verifyAlternateMobileTrap',{email:b,password:d,alterMobile:f,otp:g},h):h(this.INVALID_EMAIL)}},{key:'deleteAccount',value:function deleteAccount(b,d){this.asyncJssoCall('deleteUser',{password:b},d)}},{key:'getChannelDetails',value:function getChannelDetails(b,d,f){this.asyncJssoCall('channelDetails',{channel:b,ru:d},f)}},{key:'gpOneTapLogin',value:function gpOneTapLogin(b,d){this.asyncJssoCall('gpOneTap',{token:b},function(f){if(200==f.code&&this.createChannelCookies(),d)return d(f)}.bind(this))}},{key:'subscriberLogin',value:function subscriberLogin(b,d){this.asyncJssoCall('subscriberLogin',{token:b},function(f){if(200==f.code&&this.createChannelCookies(),d)return d(f)}.bind(this))}},{key:'verifyMobileLoginGdpr',value:function verifyMobileLoginGdpr(b,d,f,g,h,j){return this.isValidMobile(b)?void this.asyncJssoCall('verifyLoginOtpPasswordGdpr',{mobile:b,password:d,termsAccepted:f,shareDataAllowed:g,timespointsPolicy:h},function(k){if(200==k.code&&this.createChannelCookies(),j)return j(k)}.bind(this)):j(this.INVALID_MOBILE)}},{key:'verifyMobileLoginGdprForOptIn',value:function verifyMobileLoginGdprForOptIn(b,d,f,g,h,j){return this.isValidMobile(b)?void this.asyncJssoCall('verifyLoginOtpPasswordGdpr',{mobile:b,password:d,termsAccepted:f,shareDataAllowed:g,timespointsPolicy:h},function(k){if(200==k.code&&this.createChannelCookies(),j)return j(k)}.bind(this)):j(this.INVALID_MOBILE)}},{key:'verifyEmailLoginGdpr',value:function verifyEmailLoginGdpr(b,d,f,g,h,j){return this.isValidEmail(b)?void this.asyncJssoCall('verifyLoginOtpPasswordGdpr',{email:b,password:d,termsAccepted:f,shareDataAllowed:g,timespointsPolicy:h},function(k){if(200==k.code&&this.createChannelCookies(),j)return j(k)}.bind(this)):j(this.INVALID_EMAIL)}},{key:'verifyEmailLoginGdprForOptIn',value:function verifyEmailLoginGdprForOptIn(b,d,f,g,h,j){return this.isValidEmail(b)?void this.asyncJssoCall('verifyLoginOtpPasswordGdpr',{email:b,password:d,optInRequest:!0,termsAccepted:f,shareDataAllowed:g,timespointsPolicy:h},function(k){if(200==k.code&&this.createChannelCookies(),j)return j(k)}.bind(this)):j(this.INVALID_EMAIL)}},{key:'updateUserPermissions',value:function updateUserPermissions(b,d,f,g){this.asyncJssoCall('updateUserPermissions',{termsAccepted:b,shareDataAllowed:d,timespointsPolicy:f},function(h){if(200==h.code&&this.createChannelCookies(),g)return g(h)}.bind(this))}},{key:'truecallerOneTapLogin',value:function truecallerOneTapLogin(b,d){return!0!=b.valueOf()&&!1!=b.valueOf()?d(this.INVALID_REQUEST):void this.asyncJssoCall('truecallerOneTapLogin',{},function(f){var g=this;if(200==f.code){if(window.location.href='truecallersdk://truesdk/web_verify?requestNonce='+f.data.requestId+'&partnerKey=Mfn40c8470b1f53324b99aa45ac47738ad539&partnerName='+f.data.channelName+'&lang=en&title=signIn&skipOption=skip',!1==b.valueOf()&&d)return d(f);setTimeout(function(){if(document.hasFocus()){if(d)return d(g.APP_CONNECTION_TIMEOUT_RESPONSE);}else if(d)return d(f)},800)}}.bind(this))}},{key:'socialLogin',value:function socialLogin(b,d,f){'FACEBOOK'==b&&this.openSocialLoginPage('https://www.facebook.com/v5.0/dialog/oauth',d,b,f),'GOOGLEPLUS'==b&&this.openSocialLoginPage('https://accounts.google.com/o/oauth2/v2/auth',d,b,f),'LINKEDIN'==b&&this.openSocialLoginPage('https://www.linkedin.com/oauth/v2/authorization',d,b,f)}},{key:'openSocialLoginPage',value:function openSocialLoginPage(b,d,f,g){var h=b;'FACEBOOK'==f&&(h+='?client_id='+d+'&display=popup&state=SSOTLOGIN'+f+','+g+'&redirect_uri='+g+'&scope=email'),'GOOGLEPLUS'==f&&(h+='?response_type=code&client_id='+d+'&state=SSOTLOGIN'+f+','+g+'&scope=email profile&include_granted_scopes=true&redirect_uri='+g),'LINKEDIN'==f&&(h+='?response_type=code&client_id='+d+'&state=SSOTLOGIN'+f+'&scope=r_emailaddress r_liteprofile&redirect_uri='+g);window.open(h,'ssoLoginWindow','height=600,width=600,toolbar=no,titlebar=no,status=no,resizable=no,menubar=no,location=no,top=100,left=300,screenX=300,screenY=100')}},{key:'getGeoLocation',value:function getGeoLocation(b){var f=document.createElement('script');f.onload=function(){if(b)return b(geoinfo)},f.src='https://geoapi.indiatimes.com/?cb=1',document.head.appendChild(f)}},{key:'linkSocialTrapPage',value:function linkSocialTrapPage(b,d){this.asyncJssoCall('linkSocialTrap',{stateid:b},d)}},{key:'resendMobileForgotPasswordOtp',value:function resendMobileForgotPasswordOtp(b,d,f){return this.isValidMobile(b)?void(f?this.asyncJssoCall('resendForgotPasswordOTP',{mobile:b,userRecaptchaResponseToken:f},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this)):this.asyncJssoCall('resendForgotPasswordOTP',{mobile:b},d)):d(this.INVALID_MOBILE)}},{key:'resendEmailForgotPasswordOtp',value:function resendEmailForgotPasswordOtp(b,d,f){return this.isValidEmail(b)?void(f?this.asyncJssoCall('resendForgotPasswordOTP',{email:b,userRecaptchaResponseToken:f},d):this.asyncJssoCall('resendForgotPasswordOTP',{email:b},d)):d(this.INVALID_EMAIL)}},{key:'resendMobileLoginOtp',value:function resendMobileLoginOtp(b,d,f){return this.isValidMobile(b)?void(void 0==f?this.asyncJssoCallWithHeaders('resendLoginOtp',{mobile:b},this.captchaToken,d):this.asyncJssoCall('resendLoginOtp',{mobile:b,userRecaptchaResponseToken:f},function(g){if(200==g.code&&this.createChannelCookies(),d)return d(g)}.bind(this))):d(this.INVALID_MOBILE)}},{key:'resendEmailLoginOtp',value:function resendEmailLoginOtp(b,d,f){return this.isValidEmail(b)?void(void 0==f?this.asyncJssoCallWithHeaders('resendLoginOtp',{email:b},this.captchaToken,d):this.asyncJssoCall('resendLoginOtp',{email:b,userRecaptchaResponseToken:f},d)):d(this.INVALID_EMAIL)}},{key:'GisLogin',value:function GisLogin(b,d,f,g,h){this.asyncJssoCall('GISverify',{clientId:b,credential:d,select_by:f,ru:g},function(j){if(200==j.code&&this.createChannelCookies(),h)return h(j)}.bind(this))}},{key:'credLogin',value:function credLogin(b,d){this.asyncJssoCall('credLogin',{accessToken:b},function(f){if(200==f.code&&this.createChannelCookies(),d)return d(f)}.bind(this))}},{key:'newSocialLogin',value:function newSocialLogin(b,d,f,g){this.asyncJssoCall('socialLogin',{accessToken:b,preference:d,loginType:f},function(h){if(200==h.code&&this.createChannelCookies(),g)return g(h)}.bind(this))}},{key:'createChannelCookies',value:function createChannelCookies(){var b=new Date,d=new Date(b);d.setHours(24,0,0,0),this.createCookie('jsso_crosswalk_login_'+this.channel,'true',2592000000),this.createCookie('jsso_crosswalk_daily_'+this.channel,'true',d-b),this.createCookie('csrfToken',this.csrfToken,2592000000),this.createCookie('captchaToken',this.captchaToken,2592000000),this.createCookie('jsso_crosswalk_ssec_'+this.channel,this.ssec,2592000000),this.createCookie('jsso_crosswalk_tksec_'+this.channel,this.tksec,2592000000),this.createCookie('csut',this.csut,2592000000),this.createCookie('gdpr',this.gdpr,2592000000)}},{key:'getChannelCookies',value:function getChannelCookies(){var b={login:this.getCookie('jsso_crosswalk_login_'+this.channel),daily:this.getCookie('jsso_crosswalk_daily_'+this.channel)};return b}},{key:'deleteChannelCookies',value:function deleteChannelCookies(){this.deleteCookieByName('jsso_crosswalk_login_'+this.channel),this.deleteCookieByName('jsso_crosswalk_daily_'+this.channel),this.deleteCookieByName('csrfToken'),this.deleteCookieByName('captchaToken'),this.deleteCookieByName('jsso_crosswalk_ssec_'+this.channel),this.deleteCookieByName('jsso_crosswalk_tksec_'+this.channel),this.deleteCookieByName('csut'),this.deleteCookieByName('gdpr')}},{key:'getCookie',value:function getCookie(b){for(var j,d=b+'=',f=decodeURIComponent(document.cookie),g=f.split(';'),h=0;h<g.length;h++){for(j=g[h];' '==j.charAt(0);)j=j.substring(1);if(0==j.indexOf(d))return j.substring(d.length,j.length)}return''}},{key:'deleteCookieByName',value:function deleteCookieByName(b){document.cookie=b+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/'}},{key:'createCookie',value:function createCookie(b,d,f){var g=new Date,h=g.getTime()+f;g.setTime(h),document.cookie=b+'='+d+'; expires='+g.toGMTString()+'; path=/'}},{key:'isValidEmail',value:function isValidEmail(b){var d=/^(([^<>()\[\]\\.,;:\s@"]+([^<>()\[\]\\,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return d.test((b+'').toLowerCase())}},{key:'isValidMobile',value:function isValidMobile(b){var d=/^((((\+?\(91\))|0|((00|\+)?91))-?)?[6-9]\d{9})|((\+\d{1,5}[-])\d{3,14})$/;return d.test(b+'')}},{key:'isValidDomain',value:function isValidDomain(b){var d=/^(ttp[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_+~#=]+)+((\.[a-zA-Z]{2,3})+)(\/(.)*)?(\?(.)*)?/;return d.test(b+'')}},{key:'isValidPassword',value:function isValidPassword(b){b+='';var d=/.*[a-z]+.*/,f=/.*[!@#$%^&*()]+.*/,g=/.*[0-9]+.*/;return 6>b.length||14<b.length?!1:d.test(b)&&f.test(b)&&g.test(b)}}]),a}();function getParameterByName(a,b){a=a.replace(/[\[\]]/g,'\\$&');var d=new RegExp('[?&]'+a+'(=([^&#]*)|&|#|$)'),f=d.exec(b);return f?f[2]?decodeURIComponent(f[2].replace(/\+/g,' ')):'':''}